<div [ngClass]="{'selection-wrapper':panelState, 'selection-wrapper-hidden': !panelState}">
  <span class="selection-title">Make Visualization</span>

  <div class="expansion-panel-container">
    <mat-expansion-panel class="expansion-panel" [expanded]="step===0">
      <mat-expansion-panel-header>
        <mat-panel-title class="title">
          Select Visualization Type
        </mat-panel-title>
      </mat-expansion-panel-header>
      <mav-selection-visualization-type [activeVis]="activeVis" [mode]="mode" [panelState]="panelState" #visType>
      </mav-selection-visualization-type>
      <mat-action-row class="selection-button">
        <button mat-button (click)="visType.selected?addVisualization(visType.selected):undefined">Done</button>
      </mat-action-row>
    </mat-expansion-panel>
  </div>

  <div class="expansion-panel-container">
    <mat-expansion-panel class="expansion-panel" [expanded]="step===1" [disabled]="step===0">
      <mat-expansion-panel-header>
        <mat-panel-title class="title">
          Select Graphic Symbol Type(s)
        </mat-panel-title>
      </mat-expansion-panel-header>
      <mav-selection-graphic-symbol-type [activeVis]="activeVis" [mode]="mode" #gsSelector></mav-selection-graphic-symbol-type>
      <mat-action-row class="selection-button">
        <button mat-button (click)="stepDone()">Done</button>
      </mat-action-row>
    </mat-expansion-panel>
  </div>

  <div class="expansion-panel-container">
    <mat-expansion-panel class="expansion-panel" [expanded]="step===2" [disabled]="step===1 || step===0">
      <mat-expansion-panel-header>
        <mat-panel-title class="title">
          Select Graphic Variable Types
        </mat-panel-title>
      </mat-expansion-panel-header>
      <mav-selection-graphic-variable-type [activeVis]="step===2?gsSelector.activeVis:undefined" [recordStream]="gsSelector.selectedRecordStream"></mav-selection-graphic-variable-type>
      <mat-action-row class="selection-button">
        <button mat-button (click)="stepDone()">Visualize</button>
      </mat-action-row>
    </mat-expansion-panel>
  </div>
</div>