<div class="mav-table wrapper" [class.hidden]="isHidden()">
  <div *ngIf="hasData()" class="container">
    <mat-card class="card" [class.first-table]="isFirst()" [class.with-children]="hasChildren()">
      <mat-card-header class="header">
        <mat-card-title>
          <mat-icon *ngIf="hasChildren()" class="interactive-icon toggle-icon" (click)="toggleChildTables()">{{ getToggleIcon(!isChildrenHidden()) }}</mat-icon>
          <mav-table-icon></mav-table-icon>
          <span class="label">{{ label }}{{ description ? ':' : '' }}</span>
          <span class="description" *ngIf="description">&nbsp;({{ description }})</span>
          <mat-icon class="interactive-icon export-to-csv-icon" (click)="exportTable(dataSource)">cloud_download</mat-icon>
        </mat-card-title>
      </mat-card-header>

      <mat-card-content class="content">
        <mat-table class="table" [class.hidden]="isHidden() || hasHiddenData()" [dataSource]="tableDataSource">
          <mat-header-row *matHeaderRowDef="columnNames; sticky: true;" class="header-row"></mat-header-row>
          <mat-row *matRowDef="let row; columns: columnNames;" class="row"></mat-row>

          <ng-container *ngFor="let column of displayedColumns" [matColumnDef]="column.label">
            <mat-header-cell *matHeaderCellDef class="header-cell" [class.hoverable]="hoverEnabled" [class.highlight]="shouldHighlight(column)"
                [mavDraggable]="column" (mouseover)="startHover(column)" (mouseout)="endHover(column)">{{ column.label }}</mat-header-cell>
            <mat-cell *matCellDef="let element" class="row-cell">{{ element[column.id] }}</mat-cell>
          </ng-container>
        </mat-table>
      </mat-card-content>

      <mat-card-footer class="footer">
        <mat-paginator class="paginator" [hidePageSize]="true" [showFirstLastButtons]="false" [pageSize]="pageSize" [length]="numberOfRows"></mat-paginator>
        <div class="record-toggle-group" (click)="toggleRows()">
          <mat-icon class="interactive-icon toggle-icon">{{ getToggleIcon(hasHiddenData()) }}</mat-icon>
        </div>
      </mat-card-footer>
    </mat-card>
  </div>
</div>
