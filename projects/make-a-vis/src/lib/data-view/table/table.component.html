<div class="mav-table wrapper" [class.hidden]="isHidden()">
    <div *ngIf="hasData()" class="container" [class.first-table]="isFirst()" [class.with-children]="hasChildren()">
        <mat-card class="card">
            <div class="datatable-container">
                <mat-card-header class="card-header">
                    <mat-card-title>
                        <span *ngIf="hasChildren()" class="toggle-icon">
                            <mat-icon class="expand-icon" *ngIf="!dataSource.childrenHidden" (click)="toggleDataTable(dataSource)">expand_more</mat-icon>
                            <mat-icon class="expand-icon" *ngIf="dataSource.childrenHidden" (click)="toggleDataTable(dataSource)">expand_less</mat-icon>
                        </span>
                        <mav-table-icon></mav-table-icon>
                        <span class="label">{{dataSource.label}}:</span>
                        <span class="description" *ngIf="!!dataSource.description">&nbsp;({{dataSource.description }})</span>
                        <mat-icon class="export-to-csv-icon" (click)="exportTable(dataSource)">cloud_download</mat-icon>
                    </mat-card-title>
                </mat-card-header>
                <mat-card-content class="card-content">
                    <mat-table [class.hidden-table]="dataSource.hiddenData || dataSource.hidden" [dataSource]="dataSource.data.slice(0,3)" class="table">
                        <ng-container [matColumnDef]="col.label" *ngFor="let col of displayedColumns">
                            <mat-header-cell *matHeaderCellDef [class.hoverable]="isHoverable" [mavDraggable]="col" class="header-cell" (mouseover)="startHover(col)" (mouseout)="endHover(col)" [class.highlight]="shouldHighlight(col)">{{col.label}}</mat-header-cell>
                            <mat-cell *matCellDef="let element" class="mat-cell">{{element[col.id]}}</mat-cell>
                        </ng-container>
                        <mat-header-row *matHeaderRowDef="displayedColumnNames; sticky: true;" class="header-row"></mat-header-row>
                        <mat-row *matRowDef="let row; columns: displayedColumnNames;" class="row"></mat-row>
                    </mat-table>
                </mat-card-content>
                <mat-card-footer class="card-footer">
                    <div class="toggle">
                        <span (click)="toggleRows(dataSource)" class="toggle-group">
                            <span class="toggle-label">Total Records: {{dataSource.numRows}}</span>
                        <mat-icon *ngIf="dataSource.hiddenData" class="expand-icon">expand_more</mat-icon>
                        <mat-icon *ngIf="!dataSource.hiddenData" class="expand-icon">expand_less</mat-icon>
                        </span>
                    </div>
                </mat-card-footer>
            </div>
        </mat-card>
    </div>
</div>
